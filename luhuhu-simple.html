<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŠ å¯†è´§å¸å­¦ä¹ æŠ¥å‘Š - luhuhu.com</title>
    <style>
        /* æç®€æ ·å¼ï¼Œä¸“ä¸ºåµŒå…¥ä¼˜åŒ– */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #fff;
            margin: 0;
            padding: 20px;
            max-width: 100%;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #f0f0f0;
        }
        
        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.8rem;
        }
        
        .subtitle {
            color: #7f8c8d;
            margin-bottom: 15px;
        }
        
        .stats {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            margin: 20px 0;
        }
        
        .stat {
            text-align: center;
            padding: 10px 20px;
            background: #f8f9fa;
            border-radius: 8px;
            min-width: 100px;
        }
        
        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #3498db;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #7f8c8d;
            margin-top: 5px;
        }
        
        .progress {
            height: 8px;
            background: #ecf0f1;
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #2ecc71, #27ae60);
            width: 40%;
            border-radius: 4px;
        }
        
        .section {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid #3498db;
        }
        
        .section-title {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
        }
        
        .section-title i {
            margin-right: 10px;
            color: #3498db;
        }
        
        .content {
            color: #555;
        }
        
        .item {
            margin-bottom: 10px;
            padding-left: 10px;
        }
        
        .item:last-child {
            margin-bottom: 0;
        }
        
        .status {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            margin-right: 8px;
        }
        
        .status-done {
            background: #d4edda;
            color: #155724;
        }
        
        .status-doing {
            background: #fff3cd;
            color: #856404;
        }
        
        .status-todo {
            background: #d1ecf1;
            color: #0c5460;
        }
        
        .footer {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #f0f0f0;
            color: #7f8c8d;
            font-size: 0.9rem;
        }
        
        .update {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 6px;
            margin-top: 10px;
            display: inline-block;
        }
        
        /* å“åº”å¼ */
        @media (max-width: 768px) {
            body {
                padding: 15px;
            }
            
            .stats {
                gap: 10px;
            }
            
            .stat {
                min-width: 80px;
                padding: 8px 15px;
            }
            
            .section {
                padding: 15px;
            }
        }
        
        /* åŠ è½½åŠ¨ç”» */
        .loading {
            text-align: center;
            padding: 40px;
            color: #7f8c8d;
        }
        
        .spinner {
            display: inline-block;
            width: 40px;
            height: 40px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 15px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“Š åŠ å¯†è´§å¸å­¦ä¹ æŠ¥å‘Š</h1>
            <div class="subtitle">å°æ³¡é¥­ ğŸš | æ¯4å°æ—¶æ›´æ–° | åŒæ­¥åˆ° luhuhu.com</div>
            
            <div class="stats">
                <div class="stat">
                    <div class="stat-value" id="progress">40%</div>
                    <div class="stat-label">å­¦ä¹ è¿›åº¦</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="reports">3</div>
                    <div class="stat-label">æŠ¥å‘Šæ€»æ•°</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="next">04:12</div>
                    <div class="stat-label">ä¸‹æ¬¡æ›´æ–°</div>
                </div>
            </div>
            
            <div class="progress">
                <div class="progress-bar" id="progress-bar"></div>
            </div>
        </div>
        
        <div id="content">
            <div class="loading">
                <div class="spinner"></div>
                <p>æ­£åœ¨åŠ è½½æœ€æ–°æŠ¥å‘Š...</p>
            </div>
        </div>
        
        <div class="footer">
            <p>Â© 2026 å°æ³¡é¥­ ğŸš - åŠ å¯†è´§å¸å­¦ä¹ æŠ¥å‘Šç³»ç»Ÿ</p>
            <div class="update">
                <p><i class="fas fa-clock"></i> æœ€åæ›´æ–°: <span id="last-update">2026-02-21 00:12</span></p>
                <p><i class="fas fa-sync-alt"></i> ä¸‹æ¬¡æ›´æ–°: <span id="next-update">2026-02-21 04:12</span></p>
            </div>
        </div>
    </div>

    <script>
        // ç›´æ¥åŠ è½½æœ€æ–°æŠ¥å‘Š
        async function loadReport() {
            try {
                const response = await fetch('latest.md');
                const text = await response.text();
                displayReport(text);
            } catch (error) {
                document.getElementById('content').innerHTML = `
                    <div class="section">
                        <div class="section-title">
                            <i class="fas fa-exclamation-triangle"></i>
                            åŠ è½½é”™è¯¯
                        </div>
                        <div class="content">
                            <p>æ— æ³•åŠ è½½æŠ¥å‘Š: ${error.message}</p>
                            <p>è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–ç¨åé‡è¯•ã€‚</p>
                        </div>
                    </div>
                `;
            }
        }
        
        // æ˜¾ç¤ºæŠ¥å‘Š
        function displayReport(markdown) {
            const lines = markdown.split('\n');
            let html = '';
            let currentSection = '';
            
            for (let i = 0; i < lines.length; i++) {
                const line = lines[i].trim();
                
                if (line.startsWith('## ')) {
                    // æ–°ç« èŠ‚
                    const title = line.replace('## ', '');
                    const icon = getIconForSection(title);
                    
                    if (currentSection) {
                        html += '</div></div>';
                    }
                    
                    html += `
                        <div class="section">
                            <div class="section-title">
                                <i class="fas fa-${icon}"></i>
                                ${title}
                            </div>
                            <div class="content">
                    `;
                    currentSection = title;
                }
                else if (line.startsWith('- ')) {
                    // åˆ—è¡¨é¡¹
                    const item = line.replace('- ', '');
                    const status = getStatus(item);
                    const text = item.replace(/[âœ…ğŸ”´ğŸŸ¡ğŸŸ¢]/g, '').trim();
                    
                    html += `
                        <div class="item">
                            <span class="status status-${status.class}">${status.text}</span>
                            ${text}
                        </div>
                    `;
                }
                else if (line && !line.startsWith('#') && !line.startsWith('---')) {
                    // æ™®é€šæ®µè½
                    html += `<p>${line}</p>`;
                }
            }
            
            if (currentSection) {
                html += '</div></div>';
            }
            
            document.getElementById('content').innerHTML = html;
            updateDisplayInfo();
        }
        
        // è·å–ç« èŠ‚å›¾æ ‡
        function getIconForSection(title) {
            const icons = {
                'å­¦ä¹ è¿›å±•': 'chart-line',
                'ç¤¾åŒºçº¿ç´¢': 'users',
                'ç­–ç•¥å‘ç°': 'lightbulb',
                'æ¨¡æ‹Ÿäº¤æ˜“': 'chart-bar',
                'é£é™©è¯„ä¼°': 'shield-alt',
                'ä¸‹ä¸€æ­¥è®¡åˆ’': 'calendar-check'
            };
            return icons[title] || 'file-alt';
        }
        
        // è·å–çŠ¶æ€
        function getStatus(item) {
            if (item.includes('âœ…')) return { class: 'done', text: 'å·²å®Œæˆ' };
            if (item.includes('ğŸ”´')) return { class: 'todo', text: 'å¾…å¼€å§‹' };
            if (item.includes('ğŸŸ¡')) return { class: 'doing', text: 'è¿›è¡Œä¸­' };
            if (item.includes('ğŸŸ¢')) return { class: 'done', text: 'å·²å®Œæˆ' };
            return { class: 'todo', text: 'å¾…å¤„ç†' };
        }
        
        // æ›´æ–°æ˜¾ç¤ºä¿¡æ¯
        function updateDisplayInfo() {
            // æ›´æ–°è¿›åº¦æ¡
            document.getElementById('progress-bar').style.width = '40%';
            
            // æ›´æ–°æ—¶é—´ä¿¡æ¯
            const now = new Date();
            const next = new Date(now.getTime() + 4 * 60 * 60 * 1000);
            
            document.getElementById('last-update').textContent = 
                now.toLocaleDateString('zh-CN') + ' ' + now.toLocaleTimeString('zh-CN', {hour: '2-digit', minute:'2-digit'});
            
            document.getElementById('next-update').textContent = 
                next.toLocaleDateString('zh-CN') + ' ' + next.toLocaleTimeString('zh-CN', {hour: '2-digit', minute:'2-digit'});
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œ
        document.addEventListener('DOMContentLoaded', function() {
            loadReport();
            
            // æ¯5åˆ†é’Ÿæ£€æŸ¥æ›´æ–°
            setInterval(loadReport, 5 * 60 * 1000);
            
            // è‡ªé€‚åº”iframeé«˜åº¦
            window.addEventListener('load', function() {
                const height = document.body.scrollHeight;
                window.parent.postMessage({
                    type: 'iframe-height',
                    height: height
                }, '*');
            });
        });
        
        // ç›‘å¬å†…å®¹å˜åŒ–ï¼Œæ›´æ–°é«˜åº¦
        const observer = new MutationObserver(function() {
            const height = document.body.scrollHeight;
            window.parent.postMessage({
                type: 'iframe-height',
                height: height
            }, '*');
        });
        
        observer.observe(document.body, {
            childList: true,
            subtree: true,
            attributes: true
        });
    </script>
</body>
</html>